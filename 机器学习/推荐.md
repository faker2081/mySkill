[toc]



# 推荐系统

## 发展历史

#### Tapestry（1992）

这是最早应用协同过滤系统的设计，主要是解决[Xerox](https://zh.wikipedia.org/wiki/Xerox)公司[帕罗奥多研究中心](https://zh.wikipedia.org/wiki/帕羅奧多研究中心)信息重载的问题。这个研究中心的员工每天会收到非常多的电子邮件却无从筛选分类，于是研究中心便发展这项实验性的邮件系统来帮助员工解决这项问题。 其运作机制大致如下：

- 个人决定自己的感兴趣的邮件类型；
- 个人随机发出一项信息需求，可预测的结果是会收到非常多相关的文件；
- 从这些文件中个人选出至少三笔资料是其认为有用、会想要看的；
- 系统便将之记录起来成为个人邮件系统内的过滤器，从此以后经过过滤的文件会最先送达信箱；

以上是协同过滤最早的应用，接下来的里程碑为GroupLens。

#### GroupLens（1994）

这个系统主要是应用在新闻的筛选上，帮助新闻的阅听者过滤其感兴趣的新闻内容，阅听者看过内容后给一个评比的分数，系统会将分数记录起来以备未来参考之用，假设前提是阅听者以前感兴趣的东西在未来也会有兴趣阅听，若阅听者不愿揭露自己的身份也可以匿名进行评分。 和Tapestry不同之处有两点，首先，Tapestry专指一个点（如一个网站内、一个系统内）的过滤机制；GroupLens则是跨点跨系统的新闻过滤机制。再来，Tapestry不会将同一笔资料的评比总和起来；GroupLens会将同一笔资料从不同用户得到的评比加总。 GroupLens具有以下特点：

- 开放性：所有的新闻阅听者皆可使用，虽然系统委托Better Bit Bureau设计给分的系统，但若有不同的评分机制也适用于GroupLens。
- 方便性：给分并不是一件困难的事情且沟通上非常方便，评分结果容易诠释。
- 规模性：有可能发展成大规模的系统，一旦发展成大规模，存储空间与计算成本问题显得相当棘手。
- 隐密性：如果用户不想让别人知道他是谁，别人就不会知道。

由此可以看出，现今网络各个推荐系统的雏形已然形成，在GroupLens之后还有性质相近的MovieLens，电影推荐系统；Ringo，音乐推荐系统；Video Recommender，影音推荐系统；以及Jster，笑话推荐系统等等。乃至于今日的YouTube、aNobii皆是相似性质的网络推荐平台，较不同的是经过时间推移，网络越来越发达，用户越来越多，系统也发展得越来越严密。

#### 电子商务的推荐系统

最著名的电子商务推荐系统应属[亚马逊](https://zh.wikipedia.org/wiki/亞馬遜公司)网络书店，顾客选择一本自己感兴趣的书籍，马上会在底下看到一行“Customer Who Bought This Item Also Bought”，亚马逊是在“对同样一本书有兴趣的读者们兴趣在某种程度上相近”的假设前提下提供这样的推荐，此举也成为亚马逊网络书店为人所津津乐道的一项服务，各网络书店也跟进做这样的推荐服务如台湾的博客来网络书店。 另外一个例子是Facebook的广告，系统根据个人资料、周遭朋友感兴趣的广告等等对个人提供广告推销，也是一项协同过滤重要的里程碑，和前二者Tapestry、GroupLens不同的是在这里虽然商业气息浓厚同时还是带给用户很大的方便。 以上为三项协同过滤发展上重要的里程碑，从早期单一系统内的邮件、文件过滤，到跨系统的新闻、电影、音乐过滤，乃至于今日横行互联网的电子商务，虽然目的不太相同，但带给用户的方便是大家都不能否定的。

### 分类应用

#### 基于存量（Memory - based）的协同过滤

#### 基于用户（User-based）的协同过滤

用[相似统计](https://zh.wikipedia.org/w/index.php?title=相似統計&action=edit&redlink=1)的方法得到具有相似爱好或者兴趣的相邻用户，所以称之为基于用户的协同过滤。方法步骤：

1. 收集用户信息：收集可以代表用户兴趣的信息。一般的网站系统使用评分的方式或是给予评价，这种方式被称为“主动评分”。另外一种是“被动评分”，是根据用户的行为模式由系统代替用户完成评价，不需要用户直接打分或输入评价资料。电子商务网站在被动评分的资料获取上有其优势，用户购买的商品记录是相当有用的资料。
2. 最近邻搜索(Nearest neighbor search, NNS)：以用户为基础（User-based）的协同过滤的出发点是与用户兴趣爱好相同的另一组用户，就是计算两个用户的相似度。例如：查找n个和A有相似兴趣用户，把他们对M的评分作为A对M的评分预测。一般会根据资料的不同选择不同的算法，目前较多使用的相似度算法有[Pearson Correlation Coefficient](https://zh.wikipedia.org/w/index.php?title=Pearson_Correlation_Coefficient&action=edit&redlink=1)、[Cosine-based Similarity](https://zh.wikipedia.org/w/index.php?title=Cosine-based_Similarity&action=edit&redlink=1)、[Adjusted Cosine Similarity](https://zh.wikipedia.org/w/index.php?title=Adjusted_Cosine_Similarity&action=edit&redlink=1)。
3. 产生推荐结果：有了最近邻集合，就可以对目标用户的兴趣进行预测，产生推荐结果。依据推荐目的的不同进行不同形式的推荐，较常见的推荐结果有Top-N 推荐和关系推荐。Top-N 推荐是针对个体用户产生，对每个人产生不一样的结果，例如：透过对A用户的最近邻用户进行统计，选择出现频率高且在A用户的评分项目中不存在的，作为推荐结果；关系推荐是对最近邻用户的记录进行[关系规则](https://zh.wikipedia.org/wiki/关联规则)([association rules](https://zh.wikipedia.org/w/index.php?title=Association_rules&action=edit&redlink=1))挖掘。

#### 基于项目（Item-based）的协同过滤

基于用户的协同过滤在用户总数较多的情况下会导致漫长的计算时间。在2001年，Sarwar提出了基于项目的协同过滤。该技术所依据的基本假设是“能够引起用户兴趣的项目，必定与其之前评分高的项目相似”，即通过计算项目之间的相似性来代替计算用户之间的相似性。方法步骤：

1. 收集用户信息：同以用户为基础（User-based）的协同过滤。
2. 针对项目的最近邻搜索：先计算已评价项目和待预测项目的相似度，并以相似度作为权重，加权各已评价项目的分数，得到待预测项目的预测值。例如：要对项目 A 和项目 B 进行相似性计算，要先找出同时对 A 和 B 打过分的组合，对这些组合进行相似度计算，常用的算法同以用户为基础（User-based）的协同过滤。
3. 产生推荐结果：以项目为基础的协同过滤不用考虑用户间的差别，所以精度比较差。但是却不需要用户的历史资料，或是进行用户识别。对于项目来讲，它们之间的相似性要稳定很多，因此可以离线完成工作量最大的相似性计算步骤，从而降低了在线计算量，提高推荐效率，尤其是在用户多于项目的情形下尤为显著。

#### 基于模型（Model- based）的协同过滤

以存量为基础（Memory based）的协同过滤的缺点是资料稀疏，难以处理大资料量，这会影响即时结果。另一大类的协同过滤，即以模型为基础的协同过滤，可以在一定程度上缓解这个问题。 以模型为基础的协同过滤(Model-based Collaborative Filtering)是先用历史资料得到一个模型，再用此模型进行预测。以模型为基础的协同过滤广泛使用的技术包括[隐语义模型](https://zh.wikipedia.org/w/index.php?title=隐语义模型&action=edit&redlink=1)、[贝叶斯网络](https://zh.wikipedia.org/wiki/贝叶斯网络)…等，根据对一个样本的分析得到模型。

### 优缺点

#### 优点

以用户的角度来推荐的协同过滤系统有下列优点:

- 能够过滤机器难以自动内容分析的信息，如艺术品，音乐等。
- 共享其他人的经验，避免了内容分析的不完全或不精确，并且能够基于一些复杂的，难以表述的概念（如信息质量、个人品味）进行过滤。
- 有推荐新信息的能力。可以发现内容上完全不相似的信息，用户对推荐信息的内容事先是预料不到的。可以发现用户潜在的但自己尚未发现的兴趣偏好。
- 推荐个性化、自动化程度高。能够有效的利用其他相似用户的反馈信息。加快个性化学习的速度。

#### 缺点

虽然协同过滤作为一推荐机制有其相当的应用，但协同过滤仍有许多的问题需要解决。整体而言，最典型的问题有

- 新用户问题(New User Problem) 系统开始时推荐质量较差
- 新项目问题(New Item Problem) 质量取决于历史资料集
- 稀疏性问题（Sparsity）
- 系统延伸性问题（Scalability）。

### 未来发展

Item-based的推荐算法能解决User-based协同过滤的一些问题，但其仍有许多问题需要解决，最典型的有稀疏问题(Sparsity)和冷启动问题(Cold-start)，冷启动时效果较差。此外还有新用户问题和算法健壮性等问题。协同过滤作为一种典型的推荐技术有相当的应用，目前很多技术都是围绕协同过滤而展开研究的。在信息种类、表达方式越来越多的时代，旧式的信息分类过滤系统无法满足的地方，期许未来能用协同过滤的方法来解决。

## 推荐系统分类

- 基于人口统计学的推荐
- 基于内容的推荐算法
  标签内容、相似度原则
- 基于协同过滤的推荐
  - 基于近邻的协同过滤
    - 基于用户
    - 基于内容
  - 基于模型
    - 奇异值分解
    - 潜在语义分析
    - 支持向量机

### 协同过滤的推荐方法

因为一开始缺乏数据，是一个冷启动问题，所以采用：基于统计的热门推荐、基于标签的推荐

- 基于内容（Content based，CB）主要利用的是用户评价过的物品的内容特征，而CF方法还可以利用其他用户评分过的物品内容。
- CF可以解决CB的一些局限
  - 物品内哦让不完全或难以获取时，依然可以通过其他用户的反馈给出推荐
  - CF基于用户之间对物品的评价质量，避免了CB仅依赖内容可能造成的对物品质量判断的干扰
  - CF推荐不受内容限制，只要其他类似用户给出了不同物品的兴趣，CF就可以给用户推荐出内容差异很大的物品。
- 分为两类：基于近邻和基于模型

#### 基于用户的协同过滤

#### 基于内容的协同过滤

- 基于用户过去的喜好记录，为用户推荐相似的物品
- 通过抽取物品内在或外在的特征值，实现相似度计算
- 将用户的个人信息特征（基于喜好记录或是预设兴趣标签，和物品的特征相匹配，就能得到用户对物品感兴趣的程度。

##### 相似度计算

- 可以用距离表示，但一般更常用的是“余弦相似度”
  余弦相似度
  $$
  cos \theta = \frac {\vec a  \dot \ \vec b}{||a|| * ||b||}
  $$
  

#### 混合推荐

比较流行的组合方法有

- 加权混合
- 切换混合（常用）
  
- 分区混合
  采用多种推荐机制，并将不同的推荐结果分不同的区显示给用户
- 分层混合

## 推荐系统评测

### 推荐系统试验方法

1. 离线实验
   通过数据生成数据集，通过训练集，预测测试集
2. 用户调查
   用户问卷调查
3. 在线实验
   AB测试，用户分流，分别预测

### 推荐系统评价指标

1. 准确度
2. 用户满意度
3. 覆盖率
4. 多样性
5. 惊喜度
6. 信任度
7. 实时性
8. 健壮性
9. 商业目标



# Neo4j



